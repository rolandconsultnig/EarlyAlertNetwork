option_settings:
  aws:elasticbeanstalk:container:nodejs:
    NodeVersion: 16
    ProxyServer: nginx
    
  aws:elasticbeanstalk:environment:proxy:staticfiles:
    /static: dist/static
    
  aws:elasticbeanstalk:application:environment:
    NODE_ENV: production
    
  aws:elasticbeanstalk:environment:process:default:
    Port: 5000
    HealthCheckPath: /api/health
    
  aws:autoscaling:launchconfiguration:
    InstanceType: t3.small
    SecurityGroups: !Ref SecurityGroups
    
  aws:autoscaling:asg:
    MinSize: 2
    MaxSize: 4

Resources:
  AWSEBAutoScalingGroup:
    Type: AWS::AutoScaling::AutoScalingGroup
    Properties:
      HealthCheckType: ELB
      HealthCheckGracePeriod: 300